{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const cardTemplate = document.querySelector('#card-template').content;\r\nexport const createCard = ({ cardData, onDelete, onLikeCard, onOpenPopupData }) => {\r\n  const cardElement = cardTemplate.querySelector('.places__item.card').cloneNode(true);\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  const cardImg = cardElement.querySelector('.card__image');\r\n  const cardTitle = cardElement.querySelector('.card__title');\r\n  const cardLikes = cardElement.querySelector('.card__like-counter');\r\n  cardImg.src = cardData.link;\r\n  cardImg.alt = cardData.name;\r\n  cardTitle.textContent = cardData.name;\r\n  cardLikes.textContent = cardData.likes.length;\r\n  cardImg.addEventListener('click', () => {\r\n    onOpenPopupData(cardData.link, cardData.name);\r\n  });\r\n\r\n  if (cardData.owner._id !== cardData.ownerId) {\r\n    deleteButton.style.display = 'none';\r\n  }\r\n\r\n  if (cardData.likes.length > 0) {\r\n    (cardData.likes).forEach(like => {\r\n      if (like._id === cardData.ownerId) {\r\n        cardLikeButton.classList.add('card__like-button_is-active');\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteButton.addEventListener('click', () => {\r\n    onDelete(cardData._id, cardElement);\r\n  });\r\n\r\n  cardLikeButton.addEventListener('click', () => {\r\n    onLikeCard(cardData._id, cardElement);\r\n  });\r\n  \r\n  return cardElement;\r\n}\r\n\r\nexport const displayDeleteCard = (element) => {\r\n    element.remove();\r\n}\r\n\r\nexport const displayLikeCard = (cardElement) => {\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  cardLikeButton.classList.toggle('card__like-button_is-active');\r\n};\r\n\r\nexport const updateCardLikes = (cardElement, likes) => {\r\n  const cardLikes = cardElement.querySelector('.card__like-counter');\r\n  cardLikes.textContent = likes;\r\n};\r\n","export { openPopup, closePopup };\r\n\r\nfunction openPopup (popup) {\r\n  popup.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', handleEscClosePopup);  \r\n};\r\n\r\nfunction closePopup (popup) {\r\n  popup.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', handleEscClosePopup);\r\n};\r\n\r\nfunction handleEscClosePopup (evt) {\r\n  if (evt.key === 'Escape') {\r\n    const openedPopup = document.querySelector('.popup_is-opened');\r\n    closePopup(openedPopup);\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n","export { enableValidation, clearValidation };\r\n\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach(formElement => {\r\n    formElement.addEventListener('submit', setEventListeners(formElement, validationConfig));\r\n  })\r\n};\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  inputList.forEach(inputElement => {\r\n    inputElement.addEventListener('input', () => {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n    })\r\n  })\r\n};\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n    toggleButtonState(inputList, buttonElement, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n    toggleButtonState(inputList, buttonElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.textContent = '';\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  inputElement.setCustomValidity(\"\");\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  })\r\n};\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n    buttonElement.disabled = true;\r\n  } else {\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n    buttonElement.disabled = false;\r\n  }\r\n};\r\n\r\nconst clearValidation = (profileForm, validationConfig) => {\r\n  const inputList = Array.from(profileForm.querySelectorAll(validationConfig.inputSelector));\r\n  inputList.forEach(inputElement => {\r\n    hideInputError(profileForm, inputElement, validationConfig);\r\n  })\r\n  toggleButtonState(inputList, profileForm.querySelector(validationConfig.submitButtonSelector), validationConfig);\r\n};","const config = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-18',\r\n  headers: {\r\n    authorization: 'ee5d4bf5-3539-4ccf-a241-fba8d06d877d',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\nconst handleResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nconst handleError = (err) => {\r\n  console.log(err);\r\n  return Promise.reject(err);\r\n};\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: {\r\n      authorization: config.headers.authorization,\r\n      'Content-Type': config.headers['Content-Type']\r\n    }\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: {\r\n      authorization: config.headers.authorization,\r\n      'Content-Type': config.headers['Content-Type']\r\n    }\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const editUserInfo = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      authorization: config.headers.authorization,\r\n      'Content-Type': config.headers['Content-Type']\r\n    },\r\n    body: JSON.stringify({\r\n      name,\r\n      about\r\n    })\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const addCard = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: {\r\n      authorization: config.headers.authorization,\r\n      'Content-Type': config.headers['Content-Type']\r\n    },\r\n    body: JSON.stringify({\r\n      name,\r\n      link\r\n    })\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const fetchDeleteCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      authorization: config.headers.authorization\r\n    }\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const putLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      authorization: config.headers.authorization\r\n    }\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const deleteLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      authorization: config.headers.authorization\r\n    }\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const patchAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      authorization: config.headers.authorization,\r\n      'Content-Type': config.headers['Content-Type']\r\n    },\r\n    body: JSON.stringify({\r\n      avatar\r\n    })\r\n  })\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n}\r\n\r\nexport const checkImgUrl = (url) => {\r\n  return fetch(url, {\r\n    method: 'HEAD'\r\n  })\r\n    .then(res => {\r\n      if (res.ok && res.headers.get('content-type').startsWith('image/')) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    })\r\n    .catch(err => console.log(err));\r\n}","import './pages/index.css';\r\nimport { createCard, displayDeleteCard, displayLikeCard, updateCardLikes } from './components/card.js';\r\nimport { openPopup, closePopup } from './components/modal.js';\r\nimport { enableValidation, clearValidation } from './components/validation.js';\r\nimport { \r\n  getUserInfo, \r\n  getInitialCards, \r\n  editUserInfo, \r\n  addCard,\r\n  fetchDeleteCard,\r\n  putLike,\r\n  deleteLike,\r\n  patchAvatar,\r\n  checkImgUrl\r\n} from './components/api.js';\r\n\r\nconst cardsContainer = document.querySelector('.places__list');\r\nconst popups = document.querySelectorAll('.popup');\r\nconst profileButton = document.querySelector('.profile__edit-button'); \r\nconst profilePopup = document.querySelector('.popup_type_edit');\r\nconst newCardAddButton = document.querySelector('.profile__add-button');\r\nconst newCardAddPopup = document.querySelector('.popup_type_new-card');\r\nconst popupImg = document.querySelector('.popup_type_image');\r\nconst popupImgImage = document.querySelector('.popup__image');\r\nconst popupImgCaption = document.querySelector('.popup__caption');\r\nconst profileForm = document.forms['edit-profile'];\r\nconst profileFormNameInput = profileForm.elements['name'];\r\nconst profileFormJobInput = profileForm.elements['description'];\r\nconst profileName = document.querySelector('.profile__title');\r\nconst profileJob = document.querySelector('.profile__description');\r\nconst profileImg = document.querySelector('.profile__image');\r\nconst addCardForm = document.forms['new-place'];\r\nconst addCardFormNameInput = addCardForm.elements['place-name'];\r\nconst addCardFormLinkInput = addCardForm.elements['link'];\r\nconst confirmationPopup = document.querySelector('.popup_type_confirmation');\r\nconst confirmationForm = document.forms['delete-card-confirmation'];\r\nconst editAvatarPopup = document.querySelector('.popup_type_edit-avatar');\r\nconst editAvatarForm = document.forms['edit-avatar'];\r\nconst editAvatarFormLinkInput = editAvatarForm.elements['link'];\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n}\r\n\r\nlet idCardForDelete = null;\r\nlet cardElementForDelete = null;\r\nlet userId = null;\r\n\r\nconst renderCard = (item, method = 'prepend') => {\r\n  const cardDataConfig = {\r\n    onOpenPopupData: openPopupData,\r\n    onDelete: cardDelete,\r\n    onLikeCard: likeCard\r\n  };\r\n  const itemObject = {\r\n    cardData: item\r\n  }\r\n  const card = createCard({ ...itemObject, ...cardDataConfig });\r\n  cardsContainer[method](card);\r\n}\r\n\r\nconst handleAddCardForm = (evt) => {\r\n  evt.preventDefault();\r\n  const addCardSubmitButton = evt.submitter;\r\n  addCardSubmitButton.disabled = true; \r\n  addCardSubmitButton.textContent = 'Сохранение...';\r\n  addCardSubmitButton.style.cursor = 'not-allowed';\r\n  addCard(addCardFormNameInput.value, addCardFormLinkInput.value)\r\n    .then((result) => {\r\n      const card = renderCard({ ...result, ownerId: userId }, 'prepend');\r\n      evt.target.reset();\r\n      closePopup(newCardAddPopup);\r\n      return card;\r\n    })\r\n    .catch((err) => {\r\n      console.log(err)\r\n    })\r\n    .finally(() => {\r\n      addCardSubmitButton.disabled = false;\r\n      addCardSubmitButton.textContent = 'Сохранить';\r\n      addCardSubmitButton.style.cursor = 'pointer';\r\n    });\r\n}\r\n\r\nconst openPopupData = (link, name) => {\r\n  popupImgImage.src = link;\r\n  popupImgImage.alt = name;\r\n  popupImgCaption.textContent = name;\r\n  openPopup(popupImg);\r\n};\r\n\r\nconst handleProfileFormSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const profileFormButton = evt.submitter;\r\n  profileFormButton.disabled = true; \r\n  profileFormButton.style.cursor = 'not-allowed';\r\n  profileFormButton.textContent = 'Сохранение...';\r\n  editUserInfo(profileFormNameInput.value, profileFormJobInput.value)\r\n    .then((result) => {\r\n      profileName.textContent = result.name;\r\n      profileJob.textContent = result.about;\r\n      evt.target.reset();\r\n      closePopup(profilePopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      profileFormButton.disabled = false; \r\n      profileFormButton.textContent = 'Сохранить';\r\n      profileFormButton.style.cursor = 'pointer';\r\n    });\r\n};\r\n\r\nconst handleEditAvatarForm = (evt) => {\r\n  evt.preventDefault();\r\n  const editAvatarSubmitButton = evt.submitter;\r\n  editAvatarSubmitButton.disabled = true; \r\n  editAvatarSubmitButton.textContent = 'Сохранение...';\r\n  editAvatarSubmitButton.style.cursor = 'not-allowed';\r\n  const imgUrl = editAvatarFormLinkInput.value;\r\n  checkImgUrl(imgUrl)\r\n    .then((isValid) => {\r\n      if (isValid) {\r\n        patchAvatar(imgUrl)\r\n          .then((result) => {\r\n            profileImg.style.backgroundImage = 'url(' + result.avatar + ')';\r\n            evt.target.reset();\r\n            clearValidation(editAvatarForm, validationConfig);\r\n            closePopup(editAvatarPopup);\r\n          })\r\n          .catch((err) => {\r\n            console.log('Ошибка в получении картинки',err);\r\n          });\r\n      } else {\r\n        console.log('Полученный url не является изображением');\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log('Ошибка в проверке юрла', err);\r\n    })\r\n    .finally(() => {\r\n      editAvatarSubmitButton.disabled = false; \r\n      editAvatarSubmitButton.textContent = 'Сохранить';\r\n      editAvatarSubmitButton.style.cursor = 'pointer';\r\n    })\r\n}\r\n\r\nconst cardDelete = (cardId, cardElement) => {\r\n  idCardForDelete = cardId;\r\n  cardElementForDelete = cardElement;\r\n  openPopup(confirmationPopup);\r\n};\r\n\r\nconst likeCard = (cardId, cardElement) => {\r\n  if (cardElement.querySelector('.card__like-button').classList.contains('card__like-button_is-active')) {\r\n    deleteLike(cardId)\r\n      .then((result) => {\r\n        updateCardLikes(cardElement, result.likes.length);\r\n        displayLikeCard(cardElement);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  } else {\r\n    putLike(cardId)\r\n    .then((result) => {\r\n      updateCardLikes(cardElement, result.likes.length);\r\n      displayLikeCard(cardElement);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n};\r\n\r\nprofileButton.addEventListener('click', () => {\r\n  openPopup(profilePopup);\r\n  clearValidation(profileForm, validationConfig);\r\n  profileFormNameInput.value = profileName.textContent;\r\n  profileFormJobInput.value = profileJob.textContent;\r\n});\r\n\r\nnewCardAddButton.addEventListener('click', () => {\r\n  openPopup(newCardAddPopup);\r\n  addCardForm.reset();\r\n  clearValidation(addCardForm, validationConfig);\r\n});\r\n\r\nprofileImg.addEventListener('click', () => {\r\n  openPopup(editAvatarPopup);\r\n  editAvatarForm.reset();\r\n  clearValidation(editAvatarForm, validationConfig);\r\n});\r\n\r\npopups.forEach((popup) => {\r\n  popup.addEventListener('mousedown', (evt) => {\r\n    if (evt.target.classList.contains('popup_is-opened')) {\r\n      closePopup(evt.target);\r\n    }\r\n    else if (evt.target.classList.contains('popup__close')) {\r\n      closePopup(popup);\r\n    }\r\n  })\r\n});\r\n\r\nprofileForm.addEventListener('submit', handleProfileFormSubmit);\r\naddCardForm.addEventListener('submit', handleAddCardForm); \r\neditAvatarForm.addEventListener('submit', handleEditAvatarForm);\r\n\r\nenableValidation(validationConfig);\r\n\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then((results) => {\r\n    userId = results[0]._id;\r\n    console.log(results[1]);\r\n    profileName.textContent = results[0].name;\r\n    profileJob.textContent = results[0].about;\r\n    profileImg.style.backgroundImage = 'url(' + results[0].avatar + ')';\r\n    results[1].forEach(cardData => {\r\n      renderCard({ ...cardData, ownerId: results[0]._id}, 'append');\r\n      idCardForDelete = cardData._id;\r\n    })\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\nconfirmationForm.addEventListener('submit', (evt) => {\r\n  evt.preventDefault();\r\n  if (idCardForDelete && cardElementForDelete) {\r\n    fetchDeleteCard(idCardForDelete)\r\n      .then((result) => {\r\n        if (result.message === 'Пост удалён') {\r\n          displayDeleteCard(cardElementForDelete);\r\n          idCardForDelete = null;\r\n          cardElementForDelete = null;\r\n          closePopup(confirmationPopup);\r\n        } else {\r\n          console.log(result.message);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n});\r\n\r\n\r\n\r\n"],"names":["cardTemplate","document","querySelector","content","displayLikeCard","cardElement","classList","toggle","updateCardLikes","likes","textContent","openPopup","popup","add","addEventListener","handleEscClosePopup","closePopup","remove","removeEventListener","evt","key","checkInputValidity","formElement","inputElement","validationConfig","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","hideInputError","toggleButtonState","showInputError","validationMessage","errorElement","concat","id","inputErrorClass","errorClass","some","hasInvalidInput","inactiveButtonClass","disabled","clearValidation","profileForm","forEach","config","handleResponse","res","ok","json","Promise","reject","status","handleError","err","console","log","cardsContainer","popups","profileButton","profilePopup","newCardAddButton","newCardAddPopup","popupImg","popupImgImage","popupImgCaption","forms","profileFormNameInput","elements","profileFormJobInput","profileName","profileJob","profileImg","addCardForm","addCardFormNameInput","addCardFormLinkInput","confirmationPopup","confirmationForm","editAvatarPopup","editAvatarForm","editAvatarFormLinkInput","formSelector","idCardForDelete","cardElementForDelete","userId","renderCard","item","_ref","cardData","onDelete","onLikeCard","onOpenPopupData","deleteButton","cardLikeButton","cardImg","cardTitle","cardLikes","method","arguments","length","undefined","cardDataConfig","openPopupData","cardDelete","likeCard","card","_objectSpread","cloneNode","src","link","alt","name","owner","_id","ownerId","style","display","like","cardId","contains","fetch","headers","authorization","then","catch","deleteLike","result","putLike","value","reset","target","preventDefault","about","profileFormButton","submitter","cursor","body","JSON","stringify","finally","addCardSubmitButton","editAvatarSubmitButton","url","imgUrl","get","startsWith","isValid","avatar","backgroundImage","setEventListeners","enableValidation","all","results","message"],"sourceRoot":""}